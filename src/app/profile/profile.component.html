<div class="card">
  <div class="user-profile container" id="profile">
    <div class="imgcontainer">
      <img src="{{profilepicture||'assets/user.jpg'}}" class="profile-img" alt="Profile picture">
      <button type="button" id="follow" class="btn btn-primary" (click)="followUser()" *ngIf="!checkFollow()">Follow</button>
      <button type="button" id="follow" class="btn btn-primary" (click)="followUser()" *ngIf="checkFollow()">Unfollow</button>

    </div>


    <div class="card-body" name="information">
      <h5 class="card-title">Username: {{username}}</h5>
      <p class="card-text" id="name">Name: {{name}}</p>
      <p class="card-text" id="email">Email: {{email}}</p>
      <p class="card-text" id="role">Role: {{role}}</p>
      <p class="card-text" id="points">Points: {{points}}</p>
      <p class="card-text" id="school">School: {{school}}</p>
      <p class="card-text" id="events">Events Attended: {{eventsAttended}}</p>
    </div>
    <button (click)="editUserInfo(content)" *ngIf="isOwnProfile" type="button" class="btn btn-primary">Update</button>

  </div>
  <ng-template #content let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Edit My Profile</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">

      <form #myForm="ngForm" class="form-control" (ngSubmit)="onSubmit(myForm)" name="f">

        <label for="username">User Name: </label>
        <input type="text" class="form-control" id="username" [value]="username" name="username" ngModel
          #username="ngModel" [ngModel]="update_username">
        <br>
        <label for="name">Last Name:</label>
        <input type="text" class="form-control" [value]="lastname" id="lastname" name="lastname" ngModel
          #lastname="ngModel" [ngModel]="update_lastname">
        <br>
        <label for="name">First Name:</label>
        <input type="text" class="form-control" [value]="firstname" id="firstname" name="firstname" ngModel
          #firstname="ngModel" [ngModel]="update_firstname">
        <br>
        <label for="email">Email:</label>
        <input type="email" class="form-control" [value]="email" id="email" name="email" ngModel #email="ngModel"
          [ngModel]="update_email">
        <br>
        <label for="school">School:</label>
        <input class="form-control" id="school" [value]="school" name="school" ngModel #school="ngModel"
          [ngModel]="update_school">
        <br>
        <!-- This is a comment
                <input type="file" class="form-control" id="profilepicture" name="profilepicture"> -->
        <div>
          <label for="profilepicture">Profile Picture:</label>
          <input type="file" id="profilepicture" name="profilepicture" (change)="onFileChange($event)" accept="image/*"
            required>
        </div>

        <br>
        <button type="submit" class="btn btn-primary">Submit</button>

      </form>
    </div>
  </ng-template>

  <div infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50" (scrolled)="onScroll()">
    <div class="container posts-container" *ngIf="posts">
      <div class="row" style="width: 100%;" *ngFor="let post of posts">
        <div class="col col-lg-12 col-md-12 col-sm-12 justify-content-center" style="display: flex;">
          <div class="card">
            <div class="position-relative">
              <img src="{{post['imageurl']}}" class="card-img-top" alt="Image" style="height: 400px;">
              <div class="profile-overlay" style="width: 100%;">
                <div class="row">
                  <div class="col col-lg-6" style="display: flex; align-items: center;">
                    <img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png"
                      class="profile-img" alt="Profile Image">
                    <h4 style="margin-right: 10px; margin-left: 10px;">{{post['author']}}</h4>
                  </div>
                  <div class="col col-lg-6" style="display: flex; align-items: center;">
                    <p style="margin-left: auto; margin-right: 10%;">{{post['location']}}</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col col-lg-6">
                  <p class="card-text">{{post['author']}}</p>
                </div>
                <div class="col col-lg-6" style="display: flex; align-items: center; margin-left: auto;">
                  <p>{{post['date']}}</p>
                  <p style="margin-left: 10px;">{{post['time']}}</p>
                  <div>
                    <span><i class="fa-regular fa-heart" style="color: #f70808; height: 50px;"></i></span>
                    <i class="fa-solid fa-heart" style="color: #ec1354; height: 50px;"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png" -->
    <button (click)="showFollowers = !showFollowers">Show Followers ({{ followers.length }})</button>
    <ul *ngIf="showFollowers">
  <li *ngFor="let f of followers"><div class="fw-bold">
    {{f.firstname}} {{f.lastname}}
</div>
<p class="{{f._id}}"routerLink="/profile/{{f._id}}" appFollowListen style="cursor: pointer; color: aqua;">@{{f.username}}</p></li>
    </ul>
    </div>
<!-- https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png" -->


